var UploaderButtonsComponent=function(f){var e=div({cls:"buttons btn-group left"}),a=function(){alert("start all clicked")},g=function(){b.click()},h=function(){alert("clear clicked")},b=input({cls:"upload-input",type:"file",multiple:"true",onchange:function(c){c=c.target.files;for(var a=0;a<c.length;a++)f.add({name:c[a].name,blob:c[a]});b.value=""}}),d=function(){H.empty(e);var c=div({cls:"hidden"},b),d=div({cls:"btn",onclick:a},"startAll"),f=div({cls:"btn",onclick:g},"Browse"),k=div({cls:"btn",
onclick:h},"Clear");document.body.appendChild(c);e.appendChild(div(f,d,k));return e};return{update:function(a){d()},render:d}},UploaderComponent=function(){var f=Uploader(function(b,d,c){switch(d){case "file:removed":a[b].remove();delete a[b];break;case "file:added":c=new FileComponent(f,c);e.appendChild(c.render());a[b]=c;console.log("adding a file");break;case "file:hashed":a[b].setHash();break;case "file:state":a[b].setState();break;case "file:finished":d=Object.keys(a).length;uploader.settings.redirect()&&
1===d&&window.gotoPage("#file/"+c.slug);a[b].finish(c);break;case "file:uploading":a[b].setState();break;case "chunk:created":a[b].addChunk(c);break;case "chunk:progress":console.log("chunk progress");d=c.chunk;a[b].updateChunk(d,c.progress);console.log(b);console.log(d);break;case "chunk:finished":a[b].finishChunk(c);break;default:console.log("default: "+d),console.dir(c)}});window.uploader=f;var e=div({cls:"uploads"}),a={},g=new UploaderButtonsComponent(f),h=new UploaderSettingsComponent(f);return{init:function(){},
render:function(){var a=div({cls:"bar"},div({cls:"container"},g.render(),h.render()));return div({id:"uploader"},a,e)},title:function(){return"upload"}}},ChunkComponent=function(f){var e=div({cls:"chunk"}),a=div({cls:"bar"}),g=div({cls:"text"}),h=div({cls:"progress"},g,a);return{render:function(){H.empty(e);e.appendChild(h);return e},finish:function(){a.classList.add("done")},setProgress:function(b){H.empty(g);g.appendChild(span(b));a.style.width=""+b+"%";console.log("chunk progress",b)}}};
