var UploadHandler=function(a,f){var d=Math.random();a.id=d;var c=function(a,b){f.send({id:d,type:a,payload:b})};return{add:function(){c("add",a)},start:function(){c("start",a)},remove:function(){c("remove",a)},onmessage:function(c,b){switch(c){case "file:created":a.file_id=b.id;break;case "file:hashed":a.hash=b;break;case "file:state":a.file_id=b.id;a.state=b.state;var d=b.chunks_needed,e=b.chunks_received;void 0!==d&&(a.chunks_needed=d);void 0!==e&&(a.chunks_received=e);console.log("setting state",
a.state);break;case "file:uploading":a.state="uploading";break;case "file:finished":a.state="finished";a.slug=b.slug;break;default:console.log("Ignoring",c)}},file:a}};
