var PasteHack=function(){div({id:"paste-hack",contentEditable:!0});return{keydown:function(a){a.ctrlKey&&86==a.keyCode&&(document.body.appendChild(pasteHack),pasteHack.focus(),console.log("ctrl v pressed"))},keyup:function(a){if(86==a.keyCode){a=pasteHack.children;for(var c=0;c<a.length;c++){var b=a[c];if("img"==b.tagName.toLowerCase()){var b=b.src,e=new RegExp(/^data:(image\/\w+);base64,/),d=b.match(e);null!==d&&(d=d[1],b=b.replace(e,""),b={name:"pasted_file",blob:base64toBlob(b,d)},uploader.add(b))}}H.empty(pasteHack)}},
paste:function(a){a=a.clipboardData.items||[];for(var c=0;c<a.length;c++){var b=a[c].getAsFile();null!==b&&uploader.add({name:"pasted_file",blob:b})}},dragover:function(a){a.stopPropagation();a.preventDefault()},dragleave:function(a){a.stopPropagation();a.preventDefault()},drop:function(a){a.stopPropagation();a.preventDefault();a=a.target.files||a.dataTransfer.files;for(var c=0;c<a.length;c++){var b=a[c];uploader.add({name:b.name,blob:b})}}}},p=new PasteHack;document.addEventListener("keydown",p.keydown);
document.addEventListener("keyup",p.keyup);document.addEventListener("paste",p.paste);document.body.addEventListener("dragover",p.dragover);document.body.addEventListener("dragleave",p.dragleave);document.body.addEventListener("drop",p.drop);
